<!DOCTYPE html>
<html>
<head>
	<title>Module 02: Project 2 Lab - Host a Website on EC2</title>
    <style>
        @font-face {
            font-family: 'icomoon';
            src: url('https://byui-cse.github.io/itm300-course/shared/fonts/byui/icomoon.eot');
            src: url('https://byui-cse.github.io/itm300-course/shared/fonts/byui/icomoon.eot#iefix-8k8p81') format('embedded-opentype'), url('https://byui-cse.github.io/itm300-course/shared/fonts/byui/icomoon.ttf') format('truetype'), url('https://byui-cse.github.io/itm300-course/shared/fonts/byui/icomoon.woff') format('woff'), url('https://byui-cse.github.io/itm300-course/shared/fonts/byui/icomoon.svg#icomoon') format('svg');
            font-weight: normal;
            font-style: normal;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">    
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">        

    <link rel="stylesheet" type="text/css" href="https://byui-cse.github.io/itm300-course/shared/reset.css">
    <link rel="stylesheet" type="text/css" href="https://byui-cse.github.io/itm300-course/shared/fonts/fontawesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://byui-cse.github.io/itm300-course/shared/lib/katex/katex.min.css">
    <link rel="stylesheet" type="text/css" href="https://byui-cse.github.io/itm300-course/shared/lib/highlight/styles/monokai-sublime.min.css">
	<link rel="stylesheet" type="text/css" href="https://byui-cse.github.io/itm300-course/shared/cse450.css?v1.5.7">
    <meta charset="utf-8">

</head>
<body class="index-page">
     <div id="modal-screen">
        <div id="contents-wrapper">
            <div class="toc">
<ul>
<li><a href="#product-objective">Product Objective</a></li>
<li><a href="#open-up-the-lab-evironment">Open up the lab evironment</a></li>
<li><a href="#create-a-vpc">Create a VPC</a></li>
<li><a href="#create-an-ec2-instance">Create an EC2 instance</a></li>
<li><a href="#assign-an-elastic-ip">Assign an Elastic IP</a></li>
<li><a href="#connect-to-your-instance">Connect to your instance</a></li>
<li><a href="#server-setup">Server Setup:</a></li>
<li><a href="#lab-summary">Lab Summary:</a><ul>
<li><a href="#key-concepts-explained">Key Concepts Explained:</a></li>
<li><a href="#reflection-questions">Reflection Questions:</a></li>
</ul>
</li>
<li><a href="#helpful-other-links">Helpful other links:</a></li>
</ul>
</div>

            <a href="#" id="hide-contents" title="Close Table of Contents"><i class="far fa-window-close"></i></a>
        </div>
    </div>
	<header>
        <span class="icon-byui-logo"></span>
        <div id="titles">
            <h1>ITM 300 - Cloud Foundations</h1>
            <h2>Module 02: Project 2 Lab - Host a Website on EC2</h2>
            <nav><a href="https://byui-cse.github.io/itm300-course"><i class="fas fa-home"></i></a><a href="https://byui-cse.github.io/itm300-course/modules/">Modules</a><a href="https://byui-cse.github.io/itm300-course/test-prep/">Test Prep</a></nav>
        </div>
        <a href="#" id="show-contents" title="Show Table of Contents"><i class="far fa-list-alt"></i></a>
    </header>
	<article>
		<p><img alt="Quick Oil Change and Repair" src="https://byui-cse.github.io/itm300-course/shared/img/quick-logo.jpg" />
<em><a href="https://openai.com/dall-e-3">Photo by Dall-E-3</a></em></p>
<h2 id="product-objective">Product Objective</h2>
<p>You will be hosting a website for your client on EC2. We'll also install an ssl certificate. The files for the website are provided for you.</p>
<h2 id="open-up-the-lab-evironment">Open up the lab evironment</h2>
<p>Go to AWS Academy and get into the "Learner Lab" course. Start up the Learner Lab and go to the AWS console by clicking on the green dot when it appears.</p>
<h2 id="create-a-vpc">Create a VPC</h2>
<p>Please create a VPC with 2 public subnets and 2 private subnets. Make sure these are in the us-east-1 area (N. Virginia). </p>
<ul>
<li>Under name tag use: vehicleapp</li>
<li>Number of Availability Zones: 2</li>
<li>VPC Endpoints: None</li>
</ul>
<h2 id="create-an-ec2-instance">Create an EC2 instance</h2>
<ul>
<li>Name the server vehicleapp-1</li>
<li>Use the vockey for your keypair</li>
<li>Use the vehicleapp-vpc VPC</li>
<li>place the EC2 instance in the vehicleapp-subnet-public1 subnet. </li>
<li>Disable auto assign an IP address</li>
<li>Create a security Group and name it vehicle-sg<ul>
<li>Add security rules to enable ports 80 (HTTP), 443 (HTTPS), and 22 (SSH) all from anywhere</li>
</ul>
</li>
</ul>
<h2 id="assign-an-elastic-ip">Assign an Elastic IP</h2>
<p>Allocate an Elastic IP address and then associate that elastic IP address with your instance by doing the following:</p>
<ul>
<li>Go to the <span class="amz-white-button">Elastic IPs</span> under <span class="amz-white-button">Network &amp; Security</span> on the left sidebar of the EC2 dashboard.</li>
<li>Click <span class="amz-orange-button">Allocate Elastic IP address</span> and then click <span class="amz-orange-button">Allocate</span>.</li>
<li>Click on the ip address (for example <span class="amz-link">44.223.155.86</span>) under Allocated IPv4 address</li>
<li>Click <span class="amz-orange-button">Associate Elastic IP address</span></li>
<li>Choose your Instance from the drop down.</li>
<li>Click <span class="amz-orange-button">Associate</span></li>
</ul>
<h2 id="connect-to-your-instance">Connect to your instance</h2>
<p>Click on Instances on the left hand sidebar.</p>
<div class="admonition note">
<p class="admonition-title">Quickly Connecting to your Instance</p>
<p>If you use the vockey when you set up the server, you can do the following to easily connect without needing to use a ssh client.</p>
<p>From the EC2 view of all instances do the following:</p>
<ul>
<li>Click the checkmark next to your instance name</li>
<li>Click <span class="amz-white-button">Connect</span> at the top of the screen.</li>
<li>Click <span class="amz-orange-button">Connect</span> at the bottom of the next screen.</li>
</ul>
</div>
<h2 id="server-setup">Server Setup:</h2>
<p>Once you are connected to the EC2, run the following commands.</p>
<div class="codehilite"><pre><span></span><code>sudo dnf update -y
</code></pre></div>

<p>Install the latest versions of Apache web server.</p>
<div class="codehilite"><pre><span></span><code>sudo dnf install -y httpd wget
</code></pre></div>

<p>Start the Apache web server.</p>
<div class="codehilite"><pre><span></span><code>sudo systemctl start httpd
</code></pre></div>

<p>Use the systemctl command to configure the Apache web server to start at each system boot. </p>
<div class="codehilite"><pre><span></span><code>sudo systemctl enable httpd
</code></pre></div>

<p>Add your user (in this case, ec2-user) to the apache group.</p>
<div class="codehilite"><pre><span></span><code>sudo usermod -a -G apache ec2-user
sudo su - ec2-user
</code></pre></div>

<p>Change the group ownership of /var/www and its contents to the apache group.
To add group write permissions and to set the group ID on future subdirectories, change the directory permissions of /var/www and its subdirectories.
To add group write permissions, recursively change the file permissions of /var/www and its subdirectories:</p>
<div class="codehilite"><pre><span></span><code><span class="n">sudo</span><span class="w"> </span><span class="n">chown</span><span class="w"> </span><span class="o">-</span><span class="n">R</span><span class="w"> </span><span class="n">ec2</span><span class="o">-</span><span class="n">user</span><span class="p">:</span><span class="n">apache</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span>
<span class="n">sudo</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="mi">2775</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="w"> </span><span class="o">-</span><span class="n">type</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">-</span><span class="n">exec</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="mi">2775</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span>\<span class="p">;</span>
<span class="n">find</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">www</span><span class="w"> </span><span class="o">-</span><span class="n">type</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">-</span><span class="n">exec</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">chmod</span><span class="w"> </span><span class="mi">0664</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span>\<span class="p">;</span>
</code></pre></div>

<!-- Full instructions are found here if you want more details on the code above:

 -->

<p>&lt;!-- </p>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
sudo<span class="w"> </span>su
dnf<span class="w"> </span>update<span class="w"> </span>-y
dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>httpd<span class="w"> </span>wget
systemctl<span class="w"> </span>start<span class="w"> </span>httpd
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>httpd
usermod<span class="w"> </span>-a<span class="w"> </span>-G<span class="w"> </span>apache<span class="w"> </span>ec2-user
chown<span class="w"> </span>-R<span class="w"> </span>ec2-user:apache<span class="w"> </span>/var/www
chmod<span class="w"> </span><span class="m">2775</span><span class="w"> </span>/var/www<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>find<span class="w"> </span>/var/www<span class="w"> </span>-type<span class="w"> </span>d<span class="w"> </span>-exec<span class="w"> </span>sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">2775</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>
find<span class="w"> </span>/var/www<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-exec<span class="w"> </span>chmod<span class="w"> </span><span class="m">0664</span><span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>

mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/downloads
wget<span class="w"> </span>-O<span class="w"> </span>/tmp/downloads/quick-oil-part2.zip<span class="w"> </span>https://github.com/byui-cse/itm300-course/raw/main/source/module-02/quick-oil-part2.zip
mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/lab-app
unzip<span class="w"> </span>/tmp/downloads/quick-oil-part2.zip<span class="w"> </span>-d<span class="w"> </span>/tmp/lab-app
cp<span class="w"> </span>-r<span class="w"> </span>/tmp/lab-app/quick-oil-part2/*<span class="w"> </span>/var/www/html
rm<span class="w"> </span>-rf<span class="w"> </span>/tmp/lab-app/
rm<span class="w"> </span>-rf<span class="w"> </span>/tmp/downloads
<span class="sb">```</span><span class="w"> </span>--&gt;

<span class="c1">## Download the following files:</span>

Use<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>commands<span class="w"> </span>to<span class="w"> </span>download<span class="w"> </span>the<span class="w"> </span>zip<span class="w"> </span>containing<span class="w"> </span>the<span class="w"> </span>website<span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>going<span class="w"> </span>to<span class="w"> </span>host<span class="w"> </span>on<span class="w"> </span>EC2.<span class="w"> </span>This<span class="w"> </span>will<span class="w"> </span>happen<span class="w"> </span>after<span class="w"> </span>you<span class="w"> </span>connect<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>EC2<span class="w"> </span>instance<span class="w"> </span>via<span class="w"> </span>ssh.<span class="w"> </span>
</code></pre></div>

<p>wget https://github.com/byui-cse/itm300-course/raw/main/source/module-02/quick-oil-part2.zip
mkdir /tmp/lab-app
unzip quick-oil-part2.zip -d /tmp/lab-app
sudo cp -rf /tmp/lab-app/quick-oil-part2/* /var/www/html
rm -rf /tmp/lab-app/</p>
<div class="codehilite"><pre><span></span><code><span class="p">##</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">SSL</span>

<span class="n">We</span><span class="p">&#39;</span><span class="n">ll</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">openssl</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">generate</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">self</span><span class="w"> </span><span class="k">signed</span><span class="p">.</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">live</span><span class="w"> </span><span class="n">website</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="p">&#39;</span><span class="n">d</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="k">signed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">authority</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">require</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">registered</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="n">name</span><span class="p">.</span><span class="w"> </span><span class="n">We</span><span class="p">&#39;</span><span class="n">ll</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">amazon</span><span class="p">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">Public</span><span class="w"> </span><span class="n">IPv4</span><span class="w"> </span><span class="n">DNS</span><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ssl</span><span class="w"> </span><span class="n">certificate</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">won</span><span class="p">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">signed</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">CA</span><span class="p">.</span><span class="w"> </span><span class="n">So</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">give</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="s">&quot;not secure&quot;</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="n">even</span><span class="w"> </span><span class="n">though</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">serving</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">across</span><span class="w"> </span><span class="n">SSL</span><span class="o">/</span><span class="n">HTTPS</span><span class="p">.</span>
</code></pre></div>

<p>sudo dnf install -y openssl mod_ssl</p>
<div class="codehilite"><pre><span></span><code>
</code></pre></div>

<p>sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/pki/tls/private/apache-selfsigned.key -out /etc/pki/tls/certs/apache-selfsigned.crt</p>
<div class="codehilite"><pre><span></span><code><span class="n">Country</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="n">letter</span><span class="w"> </span><span class="n">code</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">XX</span><span class="p">]</span><span class="o">:**</span><span class="n">US</span><span class="o">**</span>

<span class="n">State</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">Province</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">full</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span><span class="o">:**</span><span class="n">Idaho</span><span class="o">**</span>

<span class="n">Locality</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">eg</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">Default</span><span class="w"> </span><span class="n">City</span><span class="p">]</span><span class="o">:**</span><span class="n">Rexburg</span><span class="o">**</span>

<span class="n">Organization</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">eg</span><span class="p">,</span><span class="w"> </span><span class="n">company</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="n">Default</span><span class="w"> </span><span class="n">Company</span><span class="w"> </span><span class="n">Ltd</span><span class="p">]</span><span class="o">:**</span><span class="n">MyCo</span><span class="o">**</span>

<span class="n">Organizational</span><span class="w"> </span><span class="n">Unit</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">eg</span><span class="p">,</span><span class="w"> </span><span class="n">section</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span><span class="o">:**</span><span class="n">Development</span><span class="o">**</span>

<span class="o">&lt;!--</span><span class="w"> </span><span class="n">For</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">common</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">we</span><span class="err">&#39;</span><span class="n">ll</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="n">called</span><span class="w"> </span><span class="n">nip</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">take</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">EC2</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">periods</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">dashes</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">this</span><span class="o">:</span>
<span class="mf">52.91.237.254</span><span class="w"> </span><span class="n">becomes</span><span class="w"> </span><span class="mi">52-91-237</span><span class="mf">-254.</span><span class="w"> </span><span class="n">Then</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">.</span><span class="n">nip</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">common</span><span class="w"> </span><span class="n">name</span><span class="p">.</span><span class="w"> </span><span class="o">--&gt;</span>

<span class="n">For</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">common</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">we</span><span class="err">&#39;</span><span class="n">ll</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">dns</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">amazon</span><span class="w"> </span><span class="n">provides</span><span class="p">.</span><span class="w"> </span><span class="n">We</span><span class="w"> </span><span class="n">would</span><span class="w"> </span><span class="n">normally</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">business</span><span class="p">.</span><span class="w"> </span><span class="n">Get</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">EC2</span><span class="w"> </span><span class="n">instance</span>

<span class="n">Common</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="p">(</span><span class="n">eg</span><span class="p">,</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">server</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">hostname</span><span class="p">)</span><span class="w"> </span><span class="p">[]</span><span class="o">:**</span><span class="n">ec2</span><span class="mi">-44-221-155</span><span class="mf">-86.</span><span class="n">compute</span><span class="mf">-1.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">com</span><span class="o">**</span>

<span class="n">Email</span><span class="w"> </span><span class="n">Address</span><span class="w"> </span><span class="p">[]</span><span class="o">:**</span><span class="n">youremail</span><span class="p">@</span><span class="n">byui</span><span class="p">.</span><span class="n">edu</span><span class="o">**</span>

<span class="n">Once</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">cert</span><span class="w"> </span><span class="n">created</span><span class="p">,</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">go</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">built</span><span class="o">-</span><span class="k">in</span><span class="w"> </span><span class="n">localhost</span><span class="w"> </span><span class="n">cert</span><span class="p">.</span>
</code></pre></div>

<p>sudo sed -i 's#^SSLCertificateFile /etc/pki/tls/certs/localhost.crt#SSLCertificateFile /etc/pki/tls/certs/apache-selfsigned.crt#' /etc/httpd/conf.d/ssl.conf</p>
<div class="codehilite"><pre><span></span><code>
</code></pre></div>

<p>sudo sed -i 's#^SSLCertificateKeyFile /etc/pki/tls/private/localhost.key#SSLCertificateKeyFile /etc/pki/tls/private/apache-selfsigned.key#' /etc/httpd/conf.d/ssl.conf</p>
<div class="codehilite"><pre><span></span><code><span class="o">!!!</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="s">&quot;Using SED&quot;</span>

<span class="w">    </span><span class="n">Explanation</span><span class="o">:</span>

<span class="w">    </span><span class="n">sudo</span><span class="w"> </span><span class="n">sed</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="s">&#39;s#old_text#new_text#&#39;</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">:</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">replaces</span><span class="w"> </span><span class="n">old_text</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">new_text</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="p">).</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">symbol</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">delimiter</span><span class="w"> </span><span class="n">instead</span><span class="w"> </span><span class="kr">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">usual</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">avoid</span><span class="w"> </span><span class="n">conflict</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="o">/</span><span class="p">.</span>

<span class="w">    </span><span class="n">So</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">replacing</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">localhost</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="kr">and</span><span class="w"> </span><span class="n">certificate</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">created</span><span class="p">.</span>

<span class="o">&lt;!--</span><span class="w"> </span><span class="n">Replace</span><span class="w"> </span><span class="n">SSLCertificateFile</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">certs</span><span class="o">/</span><span class="n">localhost</span><span class="p">.</span><span class="n">crt</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">SSLCertificateFile</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">certs</span><span class="o">/</span><span class="n">apache</span><span class="o">-</span><span class="n">selfsigned</span><span class="p">.</span><span class="n">crt</span>

<span class="n">Replace</span><span class="w"> </span><span class="n">SSLCertificateKeyFile</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">localhost</span><span class="p">.</span><span class="n">key</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">SSLCertificateKeyFile</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">tls</span><span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">apache</span><span class="o">-</span><span class="n">selfsigned</span><span class="p">.</span><span class="n">key</span>

<span class="n">Ctrl</span><span class="o">-</span><span class="n">O</span>
<span class="n">Ctrl</span><span class="o">-</span><span class="n">X</span><span class="w"> </span><span class="o">--&gt;</span>
</code></pre></div>

<p>sudo systemctl restart httpd
```</p>
<p>Go to your EC2 Instance and click on the Public IPv4 DNS "open address" link. You'll get a warning. Accept that warning and proceed to the site. Once you are there, you can click on the lock icon to see information about the SSL cert. If you look at the certificate, you'll see the information you provided when you created the certificate.</p>
<p>Submit a screenshot of your website running over https. You'll need to accept the warning and proceed to the website.</p>
<h2 id="lab-summary">Lab Summary:</h2>
<p>In this lab, you learned how to host a website on Amazon EC2 and secure it with SSL/TLS encryption. The lab involved setting up a virtual private cloud (VPC), launching an EC2 instance, configuring a LAMP (Linux, Apache, MySQL, PHP) stack, and enabling SSL using self-signed certificates.</p>
<h3 id="key-concepts-explained">Key Concepts Explained:</h3>
<ol>
<li>
<p><strong>Virtual Private Cloud (VPC):</strong> A VPC is a virtual network dedicated to your AWS account. It allows you to define your own network environment, including IP address ranges, subnets, route tables, and network gateways. In this lab, a custom VPC named vehicleapp was created with public and private subnets.</p>
</li>
<li>
<p><strong>Amazon EC2 (Elastic Compute Cloud) Instance:</strong> Amazon EC2 provides resizable compute capacity in the cloud. An EC2 instance named vehicleapp-1 was launched within the vehicleapp VPC, configured with a public IP and necessary security group rules to allow HTTP (port 80), HTTPS (port 443), and SSH (port 22) traffic.</p>
</li>
<li>
<p><strong>Ports:</strong> In computer networking, ports are logical constructs used to identify specific processes or services running on a networked device. Each port is associated with a unique number ranging from 0 to 65535, where lower-numbered ports (0-1023) are reserved for well-known services like HTTP (port 80) and HTTPS (port 443). Ports enable the operating system to direct incoming network packets to the appropriate applications based on their designated port numbers. This allows for efficient and organized communication between different software components and networked devices.</p>
</li>
<li>
<p><strong>TCP or UDP:</strong> Ports are categorized into two main types: TCP (Transmission Control Protocol) ports and UDP (User Datagram Protocol) ports. TCP ports are used for connection-oriented communication, ensuring reliable and ordered data delivery by establishing a connection between the sender and receiver before transmitting data. UDP ports, on the other hand, facilitate connectionless communication, allowing for faster transmission of data without the overhead of connection setup and error checking. Understanding ports is crucial for network administrators and developers to manage and secure network traffic effectively, ensuring optimal performance and security of networked applications.</p>
</li>
<li>
<p><strong>TCP/IP:</strong> TCP/IP (Transmission Control Protocol/Internet Protocol) is the fundamental networking protocol suite used to enable communication between devices on the internet. It provides a set of rules and conventions for data transmission and network communication. TCP/IP consists of multiple layers, including the application layer, transport layer, internet layer, and network access layer.</p>
</li>
<li>
<p><strong>SSL/TLS Encryption:</strong> SSL/TLS encryption secures data transmitted over the web by encrypting the communication between clients and servers. In this lab, a self-signed SSL certificate was generated using openssl, allowing HTTPS access to the hosted website.</p>
</li>
<li>
<p><strong>Server Configuration and Setup:</strong> Commands were executed on the EC2 instance to update packages (sudo dnf update -y), install necessary software packages (httpd, php, mariadb), configure Apache to start at boot (sudo systemctl enable httpd), and set appropriate permissions on web directories.</p>
</li>
<li>
<p><strong>SSL Certificate Generation and Configuration:</strong> Self-signed SSL certificates were created using openssl, with details such as organization name, common name (public DNS), and email address. The generated certificate and key were configured in Apache's SSL configuration file (/etc/httpd/conf.d/ssl.conf) to enable HTTPS.</p>
</li>
</ol>
<h3 id="reflection-questions">Reflection Questions:</h3>
<ul>
<li>Explain the purpose of a Virtual Private Cloud (VPC) in AWS. Why is it important to configure subnets and security groups within a VPC when launching EC2 instances?</li>
<li>What is SSL/TLS encryption, and why is it important for securing websites? Compare and contrast self-signed certificates with certificates signed by a certificate authority (CA).</li>
<li>Discuss the steps involved in setting up and configuring Apache web server (httpd) on an EC2 instance. How does Apache handle HTTP and HTTPS requests?</li>
<li>Explain the significance of server permissions (chmod, chown) in securing web directories. Why is it important to restrict access to certain directories and files on a web server?</li>
<li>Reflect on the process of generating and configuring SSL certificates using openssl. What information is required when creating a certificate, and how does the certificate ensure secure communication between clients and servers?</li>
</ul>
<h2 id="helpful-other-links">Helpful other links:</h2>
<p><a href="https://medium.com/@eikachiu/install-nginx-on-amazon-linux-2023-d032160bfc20" target="_blank">nginx on Amazon Linux 2023</a></p>
<p><a href="https://gist.github.com/atikju/1fb8d3e856e32f3b0a678d393914351b" target="_blank">nginx on Amazon Linux 2023 LAMP</a></p>
<p><a href="https://www.digicert.com/kb/ssl-support/openssl-quick-reference-guide.htm" target="_blank">OpenSSL Quick Reference Guide</a></p>
<p><a href="https://www.digicert.com/kb/csr-ssl-installation/nginx-openssl.htm" target="_blank">nginx SSL installation guide</a></p>
<p><a href="https://docs.aws.amazon.com/linux/al2023/ug/ec2-lamp-amazon-linux-2023.html">Hosting Website on EC2 using a LAMP stack</a></p>
	</article>
	<script src="https://byui-cse.github.io/itm300-course/shared/lib/highlight/highlight.pack.js"></script>
	<script src="https://byui-cse.github.io/itm300-course/shared/lib/katex/katex.min.js"></script>
    <script src="https://byui-cse.github.io/itm300-course/shared/lib/katex/contrib/auto-render.min.js"></script>
	<script src="https://byui-cse.github.io/itm300-course/shared/lib/smartquotes/smartquotes.min.js"></script>
    <script>

        /* Startup scripts for katex rendering */
    	renderMathInElement(document.body,
		{
			delimiters: [
				{left: "$$", right: "$$", display: true},
				{left: "$", right: "$", display: false},
			]
    	});

        /* Highlighting code */
    	hljs.initHighlightingOnLoad();
    	var elements = document.querySelectorAll('.language-text')
		for (var i = 0; i < elements.length; i++) {
  			elements[i].classList.add('hljs');
		}

        /* TOC support */
        var hideContents = function(e){
            console.log(e.target);
            if(e.target.id === 'modal-screen' || e.target.nodeName.toLowerCase() === 'i') {
                e.preventDefault();
                document.querySelector('#contents-wrapper').classList.remove('active');
                document.querySelector('#modal-screen').classList.remove('active');
            }
        }

        var showContents = function(e){
            e.preventDefault();
            document.querySelector('#contents-wrapper').classList.add('active');
            document.querySelector('#modal-screen').classList.add('active');
        }

        document.querySelector("#hide-contents").addEventListener('click', hideContents);
        document.querySelector("#modal-screen").addEventListener('click', hideContents);
        document.querySelector("#show-contents").addEventListener('click', showContents);
    	
    </script>
</body>
</html>